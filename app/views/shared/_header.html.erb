<header class="bg-gray-900 text-white">
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between py-4">
      <%= link_to root_path, class: "flex items-center text-white no-underline hover:text-gray-300 transition" do %>
        <span class="text-2xl font-bold">MyApp</span>
      <% end %>

      <% if user_signed_in? %>
        <!-- ログイン中の表示 -->
        <div data-controller="dropdown" class="relative">
          <button 
            type="button" 
            data-action="dropdown#toggle click@window->dropdown#hide"
            class="flex items-center space-x-2 px-4 py-2 rounded hover:bg-gray-800 transition"
          >
            <span><%= current_user.name %></span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
            </svg>
          </button>
          <div
            data-dropdown-target="menu"
            class="hidden transition transform origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5"
            data-transition-enter-from="opacity-0 scale-95"
            data-transition-enter-to="opacity-100 scale-100"
            data-transition-leave-from="opacity-100 scale-100"
            data-transition-leave-to="opacity-0 scale-95"
          >
            <div class="py-1">
              <%= link_to edit_user_registration_path, 
                  data: { action: "dropdown#toggle" },
                  class: "block px-4 py-2 text-gray-700 hover:bg-gray-100 transition" do %>
                アカウント設定
              <% end %>
              <%= button_to destroy_user_session_path, 
                  method: :delete,
                  data: { action: "dropdown#toggle" },
                  class: "block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100 transition" do %>
                ログアウト
              <% end %>
            </div>
          </div>
        </div>
      <% else %>
        <!-- 非ログイン時の表示 -->
        <div>
          <%= link_to 'ログイン', new_user_session_path, 
              class: "px-4 py-2 bg-white text-gray-900 rounded hover:bg-gray-100 transition font-semibold" %>
        </div>
      <% end %>
    </div>
  </div>
</header>